<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>認知症patient journey map（SCD-MCI 期） V1</title>
  <style>
    :root {
      --white: #ffffff;
      --slate-50: #f8fafc;
      --slate-100: #f1f5f9;
      --slate-300: #cbd5e1;
      --slate-600: #475569;
      --slate-700: #334155;
      --slate-800: #1e293b;
      --slate-900: #0f172a;
      --blue-50: #eff6ff; --blue-100: #dbeafe; --blue-300: #93c5fd; --blue-700: #1d4ed8;
      --emerald-50: #ecfdf5; --emerald-100: #d1fae5; --emerald-300: #6ee7b7; --emerald-700: #047857;
      --amber-50: #fffbeb; --amber-100: #fef3c7; --amber-200: #fde68a; --amber-300: #fcd34d; --amber-700: #b45309;
      --purple-50: #f3e8ff; --purple-100: #e9d5ff; --purple-300: #d8b4fe; --purple-700: #6b21a8;
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--white); color: var(--slate-900); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic UI", "Yu Gothic", "Meiryo", Arial, sans-serif; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
    h1 { margin: 0 0 4px; font-size: 28px; }
    p.lead { margin: 0 0 16px; font-size: 14px; color: var(--slate-600); }
    .toolbar { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-bottom: 12px; }
    button { border: 1px solid var(--slate-300); background: var(--white); color: var(--slate-700); border-radius: 9999px; padding: 6px 10px; font-size: 13px; }
    button.active { background: var(--slate-900); color: var(--white); border-color: var(--slate-900); }
    .grid { display: grid; grid-template-columns: 200px repeat(7, minmax(220px, 1fr)); }
    .lane-head { position: sticky; left: 0; background: var(--slate-100); color: var(--slate-800); padding: 12px; border-right: 1px solid var(--slate-300); }
    .phase-cell { padding: 12px; }
    .phase-head { padding: 12px; position: relative; }
    .phase-sub { color: var(--slate-600); font-size: 12px; }
    .row { border-top: 1px solid var(--slate-300); }
    .card { border-radius: 16px; padding: 12px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); border: 1px solid var(--slate-300); }
    .badge { border-radius: 9999px; font-size: 11px; padding: 2px 8px; }
    .list { margin: 8px 0 0; padding: 0 0 0 18px; color: var(--slate-700); }
    .list li { margin: 2px 0; }
    .memo { margin-top: 8px; font-size: 11px; background: rgba(255,251,235,0.8); border: 1px solid var(--amber-200); border-radius: 8px; padding: 8px; }
    .memo .ttl { font-weight: 600; margin-bottom: 4px; }
    .section { border: 1px solid var(--slate-300); border-radius: 16px; padding: 16px; }
    .section h3 { margin: 0 0 8px; font-size: 16px; }
    .legend { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 16px; }
    .footer { margin-top: 16px; font-size: 12px; color: var(--slate-600); }
    @media print { button { display: none !important; } @page { size: A4 landscape; margin: 12mm; } .avoid-break { break-inside: avoid; page-break-inside: avoid; } }
  </style>
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()" />
</head>
<body>
  <div id="app"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">
    const Cat = { MEDICAL:'医療', NONPHARMA:'非薬物', SUPPORT:'見守り/生活', FINANCE:'金融/法務', INFO:'情報/啓発' };
    const phases = [
      { id:'awareness', title:'SCD 気づき・自己チェック', subtitle:'主観的認知低下の気づき' },
      { id:'primary', title:'一次受診・スクリーニング', subtitle:'HDS-R / MMSE 等' },
      { id:'imaging', title:'画像・鑑別', subtitle:'MRI(VSRAD) / SPECT(eZIS) / DAT-SPECT' },
      { id:'pathology', title:'病理確認', subtitle:'アミロイドPET / 髄液(CSF)' },
      { id:'planning', title:'診断・計画', subtitle:'MCI/軽度ADの確定・計画化' },
      { id:'treatment', title:'治療・モニタリング', subtitle:'DMT / 非薬物 / MRI(ARIA監視)' },
      { id:'support', title:'生活支援・リスク備え', subtitle:'見守り・家族・金融/法務' },
    ];
    const lanes = [
      { id:'citizen', title:'本人 / 家族' },
      { id:'primarycare', title:'かかりつけ医 / 地域包括' },
      { id:'specialty', title:'もの忘れ外来 / 専門外来' },
      { id:'community', title:'民間サービス / 自治体' },
    ];
    const nodes = [
      { id:'selfcheck', phase:'awareness', lane:'citizen', title:'自己チェック', examples:['脳検','BI-NOU','のうコン','CogniTalk'], category:Cat.INFO, memo:{自治体:'健診・フレイル予防で案内', 病院:'一次窓口への受診勧奨資料を共有', 企業:'自己チェックUX/結果レポート提供'} },
      { id:'savonix', phase:'awareness', lane:'citizen', title:'Savonix（デジタル認知検査）', examples:['自己管理アプリ','10-20分'], category:Cat.INFO, memo:{自治体:'アプリ配布・啓発', 病院:'高リスク者の受診促進', 企業:'実施管理・データ可視化'} },
      { id:'brain-ex', phase:'awareness', lane:'community', title:'ブレインエクササイズ開始', examples:['CogEvo','Dr.脳トレ','脳活道場'], category:Cat.NONPHARMA, memo:{自治体:'介護予防クラスで導入', 病院:'指導箋で推奨', 企業:'プログラム提供・効果測定'} },
      { id:'activity', phase:'awareness', lane:'community', title:'社会的活動・音楽/聴覚刺激', examples:['SYNAPSOLOGY','sail','ききっぱ'], category:Cat.NONPHARMA, memo:{自治体:'地域サロン/公民館で開催', 病院:'紹介・逆紹介の導線整備', 企業:'教材・講師育成'} },
      { id:'money_scd', phase:'awareness', lane:'citizen', title:'金銭/法務の備え（早期）', examples:['KAERU(金銭管理支援)','家族信託(ファミトラ/OYATOKO)','任意後見/見守り契約'], category:Cat.FINANCE, memo:{自治体:'地域包括・社協で士業窓口紹介', 病院:'診断書等の必要書類の案内', 企業:'契約/信託/後見の手続サポート'} },
      { id:'sompo_scd', phase:'awareness', lane:'citizen', title:'認知症保険（SOMPOひまわり）', examples:['MCI/認知症一時金'], category:Cat.FINANCE, memo:{自治体:'高齢者講座で周知', 病院:'適用条件の情報提供', 企業:'商品提供/相談'} },
      { id:'nissay_scd', phase:'awareness', lane:'citizen', title:'認知症保険（日本生命）', examples:['サポートプラス等'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
      { id:'daiichi_scd', phase:'awareness', lane:'citizen', title:'認知症保険（第一生命）', examples:['要介護連動型等'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
      { id:'lifenet_scd', phase:'awareness', lane:'citizen', title:'認知症保険（ライフネット be）', examples:['MCI一時金コンセプト'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
      { id:'gate', phase:'primary', lane:'primarycare', title:'一次評価', examples:['問診','HDS-R','MMSE'], category:Cat.MEDICAL, memo:{自治体:'受診勧奨/相談窓口', 病院:'実施・記録・判定', 企業:'予約/計測のDX支援'} },
      { id:'mocaj', phase:'primary', lane:'primarycare', title:'MoCA-J', examples:['10-15分','軽い認知変化の検出'], category:Cat.MEDICAL, memo:{自治体:'健診/地域包括で案内', 病院:'実施/カットオフで専門外来紹介', 企業:'スコア管理ツール提供'} },
      { id:'cognigram', phase:'primary', lane:'primarycare', title:'Cogstate / Cognigram（NouKNOW）', examples:['タブレット/PC','反応時間ベース'], category:Cat.MEDICAL, memo:{自治体:'集団スクリーニング支援', 病院:'前後比較で経時追跡', 企業:'ライセンス/運用サポート'} },
      { id:'neurotrack', phase:'primary', lane:'community', title:'Neurotrack（デジタル認知）', examples:['視線追跡','オンライン'], category:Cat.INFO, memo:{自治体:'在宅スクリーニング周知', 病院:'陽性者の受診誘導', 企業:'実施プラットフォーム提供'} },
      { id:'cantab', phase:'primary', lane:'specialty', title:'CANTAB（タブレット認知検査）', examples:['モジュール選択','反復可能'], category:Cat.MEDICAL, memo:{自治体:'—', 病院:'専門外来で詳細評価', 企業:'機器/ライセンス供給'} },
      { id:'imaging', phase:'imaging', lane:'specialty', title:'画像/鑑別', examples:['MRI(VSRAD)','脳血流SPECT(eZIS)','DAT-SPECT（DLB鑑別）'], category:Cat.MEDICAL, memo:{自治体:'—', 病院:'実施・読影・説明', 企業:'機器・解析ソフト供給'} },
      { id:'pathology', phase:'pathology', lane:'specialty', title:'病理確認', examples:['アミロイドPET','髄液(CSF)検査'], category:Cat.MEDICAL, memo:{自治体:'—', 病院:'適応判定/インフォームド', 企業:'薬剤/トレーサ供給・解析'} },
      { id:'biomarker', phase:'pathology', lane:'specialty', title:'血液バイオマーカー（p-tau等）', examples:['施設限定運用','将来の実装拡大を想定'], category:Cat.MEDICAL, memo:{自治体:'—', 病院:'前臨床/研究連携で活用', 企業:'試薬・検査受託'} },
      { id:'careplan', phase:'planning', lane:'specialty', title:'診断・治療方針の決定', examples:['MCI/軽度ADの確定','適正使用基準確認','多職種カンファ'], category:Cat.MEDICAL, memo:{自治体:'介護予防/地域資源へ橋渡し', 病院:'説明・同意・計画書', 企業:'計画書DX/PHR連携'} },
      { id:'carecoach', phase:'planning', lane:'community', title:'生活計画・家族教育', examples:['家族向け教育','地域資源マッピング'], category:Cat.SUPPORT, memo:{自治体:'家族教室/相談窓口', 病院:'療養指導・地域連携パス', 企業:'教材/eラーニング提供'} },
      { id:'dmt', phase:'treatment', lane:'specialty', title:'疾患修飾薬（DMT）', examples:['レカネマブ','ドナネマブ','MRIでARIA監視'], category:Cat.MEDICAL, memo:{自治体:'—', 病院:'点滴体制/モニタリング/逆紹介', 企業:'薬剤供給・PMS'} },
      { id:'nonpharma', phase:'treatment', lane:'community', title:'非薬物療法の継続', examples:['運動','認知訓練','栄養/睡眠'], category:Cat.NONPHARMA, memo:{自治体:'通いの場運営', 病院:'処方的推奨/評価', 企業:'プログラムとデバイス提供'} },
      { id:'neuronation', phase:'treatment', lane:'community', title:'デジタル認知トレ（NeuroNation等）', examples:['NeuroNation MED','Lumosity','N-back等'], category:Cat.NONPHARMA, memo:{自治体:'参加券配布/利用補助', 病院:'経時変化の確認', 企業:'サブスク/効果レポート'} },
      { id:'exergame', phase:'treatment', lane:'community', title:'エクサゲーム/デュアルタスク', examples:['Wii Fit','体操×課題'], category:Cat.NONPHARMA, memo:{自治体:'介護予防教室に導入', 病院:'理学/作業療法と連携', 企業:'機器/コンテンツ'} },
      { id:'paro', phase:'treatment', lane:'community', title:'情動ケア（PARO等）', examples:['情動安定','社会的交流促進'], category:Cat.NONPHARMA, memo:{自治体:'施設導入支援', 病院:'BPSD緩和の補助', 企業:'デバイス提供/保守'} },
      { id:'papero', phase:'treatment', lane:'community', title:'会話ロボ活用（PaPeRo i等）', examples:['服薬/予定支援','見守り連携'], category:Cat.NONPHARMA, memo:{自治体:'実証/地域トライアル', 病院:'個別計画へ組込み', 企業:'機器/対話AI運用'} },
      { id:'monitor', phase:'support', lane:'community', title:'見守り・日常支援', examples:['ALSOKタグ','ココセコム','yottey手帳','おぼえている手帳','Aikomi/INMU'], category:Cat.SUPPORT, memo:{自治体:'地域ケア会議でケース共有', 病院:'リスク評価→紹介', 企業:'端末/アプリ提供'} },
      { id:'gps_mitene', phase:'support', lane:'community', title:'屋外見守りGPS（みてね）', examples:['位置共有','エリア通知'], category:Cat.SUPPORT, memo:{自治体:'徘徊対策補助/貸与', 病院:'リスク者へ勧奨', 企業:'端末/回線/アプリ'} },
      { id:'gps_mamos', phase:'support', lane:'community', title:'屋外見守りGPS（まもサーチ）', examples:['履歴/到着通知'], category:Cat.SUPPORT, memo:{自治体:'—', 病院:'—', 企業:'端末/プラットフォーム'} },
      { id:'gps_dokokana', phase:'support', lane:'community', title:'屋外見守りGPS（どこかなGPS）', examples:['家族複数見守り'], category:Cat.SUPPORT, memo:{自治体:'—', 病院:'—', 企業:'端末/プラットフォーム'} },
      { id:'alsok_home', phase:'support', lane:'community', title:'HOME ALSOK 見守り', examples:['緊急通報','駆けつけ','生活リズム'], category:Cat.SUPPORT, memo:{自治体:'高齢者見守り事業連携', 病院:'必要時の情報共有', 企業:'サービス運用'} },
      { id:'secom_home', phase:'support', lane:'community', title:'セコム 親の見守り', examples:['安否確認','救急通報','外出位置把握'], category:Cat.SUPPORT, memo:{自治体:'—', 病院:'—', 企業:'サービス運用'} },
      { id:'money', phase:'support', lane:'citizen', title:'金銭/法務の備え（汎用）', examples:['KAERU(金銭管理支援)','家族信託(ファミトラ/OYATOKO)'], category:Cat.FINANCE, memo:{自治体:'地域の士業窓口と連携', 病院:'診断書等の情報提供', 企業:'契約/手続サポート'} },
      { id:'sompo', phase:'support', lane:'citizen', title:'認知症保険（SOMPOひまわり）', examples:['MCI/認知症一時金'], category:Cat.FINANCE, memo:{自治体:'高齢者向け講座で周知', 病院:'適用条件の情報提供', 企業:'商品提供/相談'} },
      { id:'nissay', phase:'support', lane:'citizen', title:'認知症保険（日本生命）', examples:['サポートプラス等'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
      { id:'daiichi', phase:'support', lane:'citizen', title:'認知症保険（第一生命）', examples:['要介護連動型等'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
      { id:'lifenet', phase:'support', lane:'citizen', title:'認知症保険（ライフネット be）', examples:['MCI一時金コンセプト'], category:Cat.FINANCE, memo:{自治体:'—', 病院:'—', 企業:'商品提供/相談'} },
    ];

    const palette = {
      slate300:'#cbd5e1', slate600:'#475569', slate700:'#334155', slate800:'#1e293b', slate100:'#f1f5f9', slate50:'#f8fafc',
      blue50:'#eff6ff', blue100:'#dbeafe', blue300:'#93c5fd', blue700:'#1d4ed8',
      emerald50:'#ecfdf5', emerald100:'#d1fae5', emerald300:'#6ee7b7', emerald700:'#047857',
      amber50:'#fffbeb', amber100:'#fef3c7', amber200:'#fde68a', amber300:'#fcd34d', amber700:'#b45309',
      purple50:'#f3e8ff', purple100:'#e9d5ff', purple300:'#d8b4fe', purple700:'#6b21a8',
    };
    const cardStyle=(c)=>({[Cat.MEDICAL]:{backgroundColor:palette.blue50,borderColor:palette.blue300},[Cat.NONPHARMA]:{backgroundColor:palette.emerald50,borderColor:palette.emerald300},[Cat.SUPPORT]:{backgroundColor:palette.amber50,borderColor:palette.amber300},[Cat.FINANCE]:{backgroundColor:palette.purple50,borderColor:palette.purple300},[Cat.INFO]:{backgroundColor:palette.slate50,borderColor:palette.slate300}}[c]||{backgroundColor:'#fff',borderColor:palette.slate300});
    const badgeStyle=(c)=>({[Cat.MEDICAL]:{color:palette.blue700,backgroundColor:palette.blue100},[Cat.NONPHARMA]:{color:palette.emerald700,backgroundColor:palette.emerald100},[Cat.SUPPORT]:{color:palette.amber700,backgroundColor:palette.amber100},[Cat.FINANCE]:{color:palette.purple700,backgroundColor:palette.purple100},[Cat.INFO]:{color:palette.slate700,backgroundColor:palette.slate100}}[c]||{color:palette.slate700,backgroundColor:palette.slate100});

    function App(){
      const cats=[Cat.MEDICAL,Cat.NONPHARMA,Cat.SUPPORT,Cat.FINANCE,Cat.INFO];
      const [enabled,setEnabled]=React.useState(new Set(cats));
      const visible=nodes.filter(n=>enabled.has(n.category));
      const toggle=(c)=>{const n=new Set(enabled); n.has(c)?n.delete(c):n.add(c); setEnabled(n);};

      return (<div className="container">
        <h1>認知症patient journey map（SCD-MCI 期） V1</h1>
        <p className="lead">患者のフェーズ推移（横軸）× 関与主体（縦軸）。各カードの「導線メモ」を記載。</p>

        <div className="toolbar">
          {cats.map(c=>(<button key={c} onClick={()=>toggle(c)} className={enabled.has(c)?'active':''}>{enabled.has(c)?'●':'○'} {c}</button>))}
          <button onClick={()=>setEnabled(new Set(cats))}>全表示</button>
          <button onClick={()=>setEnabled(new Set())}>全非表示</button>
        </div>

        <div id="capture-area">
          <div className="grid">
            <div></div>
            {phases.map(p=>(<div key={p.id} className="phase-head avoid-break"><div style={{fontWeight:600}}>{p.title}</div><div className="phase-sub">{p.subtitle}</div></div>))}
          </div>
          <div className="grid row">
            {lanes.map(l=>(<React.Fragment key={l.id}>
              <div className="lane-head">{l.title}</div>
              {phases.map(p=>(<div key={p.id} className="phase-cell">
                {visible.filter(n=>n.phase===p.id && n.lane===l.id).map(n=>(
                  <div key={n.id} className="card avoid-break" style={cardStyle(n.category)}>
                    <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',gap:8}}>
                      <div style={{fontWeight:600,fontSize:14}}>{n.title}</div>
                      <span className="badge" style={badgeStyle(n.category)}>{n.category}</span>
                    </div>
                    {Array.isArray(n.examples)&&n.examples.length>0 && <ul className="list">{n.examples.map((e,i)=><li key={i}>{e}</li>)}</ul>}
                    {n.memo && (<div className="memo">
                      <div className="ttl">導線メモ</div>
                      <ul className="list" style={{marginTop:0}}>
                        <li><strong>自治体：</strong>{n.memo.自治体}</li>
                        <li><strong>病院：</strong>{n.memo.病院}</li>
                        <li><strong>企業：</strong>{n.memo.企業}</li>
                      </ul>
                    </div>)}
                  </div>
                ))}
              </div>))}
            </React.Fragment>))}
          </div>
        </div>

        <div className="legend">
          <div className="section"><h3>凡例（レイヤー）</h3><ul className="list" style="margin-top:0;">
            <li><span className="badge" style={badgeStyle(Cat.MEDICAL)}>医療</span>：検査・診断・治療</li>
            <li><span className="badge" style={badgeStyle(Cat.NONPHARMA)}>非薬物</span>：運動・認知訓練</li>
            <li><span className="badge" style={badgeStyle(Cat.SUPPORT)}>見守り/生活</span>：手帳・見守りタグ</li>
            <li><span className="badge" style={badgeStyle(Cat.FINANCE)}>金融/法務</span>：信託・保険</li>
            <li><span className="badge" style={badgeStyle(Cat.INFO)}>情報/啓発</span>：自己チェック等</li>
          </ul></div>
          <div className="section"><h3>導線の読み方</h3><ol className="list" style="margin-top:0;">
            <li>SCD段階→一次受診→専門外来→病理→治療/支援へ</li>
            <li>金融/法務はSCD段階でも情報提供</li>
          </ol></div>
          <div className="section"><h3>配布のしかた（閲覧専用）</h3><ul className="list" style="margin-top:0;">
            <li>このHTMLを静的ホスティングにアップロード</li>
            <li>ブラウザの印刷機能でPDF保存も可（UIボタンは非表示運用）</li>
          </ul></div>
        </div>

        <div className="footer">※ 本配置図は一般的な枠組み例です。地域の提供体制・保険適用・運用基準に合わせて調整してください。</div>
      </div>);
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<App/>);
  </script>
</body>
</html>
